HAL_Delay(1000)-задержка.

1. C аналоговыми входами.
HAL_ADCEx_Calibration_Start(&hadc1);
HAL_ADC_Start(&номер входа)-начинаем преобразование.
HAL_ADC_PollForConversion(&Номер входа, время-100) ожидание окончания преобразования.
HAL_ADC_GetValue(номер входа)-читаем значение с АЦП.
HAL_ADC_Stop(номер входа)-заканчиваем преобразование.
2. 